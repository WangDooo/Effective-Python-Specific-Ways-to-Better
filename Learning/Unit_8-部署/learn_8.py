#================================================================
# 54. 考虑用模块级别的代码来配置不同的部署环境
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 55. 通过repr字符串来输出调试信息
#----------------------------------------------------------------
# print(5)
# print('5')
# a = '\x07'
# print(a)
# print(repr(a))
#----------------------------------------------------------------


#================================================================
# 56. 用unittest来测试全部代码
#----------------------------------------------------------------
# 详见utils.py utils_test.py
#----------------------------------------------------------------


#================================================================
# 57. 考虑使用pdb实现交互调试
#----------------------------------------------------------------
# def complex_func(a, b, c):
# 	temp = a * b * c
# 	temp2 = a + b**c
# 	import pdb; pdb.set_trace()
# 	return temp2 - temp

# print(complex_func(1, 2, 4))
#----------------------------------------------------------------


#================================================================
# 58. 先分析性能，然后再优化
#----------------------------------------------------------------
# def insertion_sort(data):
# 	result = []
# 	for value in data:
# 		insert_value_new(result, value)
# 	return result

# def insert_value(array, value):
# 	for i, existing in enumerate(array):
# 		if existing > value:
# 			array.insert(i, value)
# 			return
# 	array.append(value)

# from bisect import bisect_left

# def insert_value_new(array, value):
# 	i = bisect_left(array, value)
# 	array.insert(i, value)

# from random import randint

# max_size = 10**4
# data = [randint(0, max_size) for _ in range(max_size)]
# test = lambda: insertion_sort(data)

# import cProfile

# profiler = cProfile.Profile()
# profiler.runcall(test)

# import pstats

# stats = pstats.Stats(profiler)
# stats.strip_dirs()
# stats.sort_stats('cumulative')
# stats.print_stats()
# stats.print_callers()
#----------------------------------------------------------------


#================================================================
# 59. 用tracemalloc 来掌握内存的使用及泄露情况
#----------------------------------------------------------------
# # using_gc
# import gc

# found_objcets = gc.get_objects()
# print('%d objects before' % len(found_objcets))

# import waste_memory
# x = waste_memory.run()
# found_objcets = gc.get_objects()
# print('%d objects after' % len(found_objcets))

# for obj in found_objcets[:3]:
# 	print(repr(obj)[:100])

# # top_n

# import tracemalloc
# tracemalloc.start(10) # Save up to 10 stack frames

# time1 = tracemalloc.take_snapshot()
# import waste_memory
# x = waste_memory.run()
# time2 = tracemalloc.take_snapshot()

# stats = time2.compare_to(time1, 'lineno')
# for stat in stats[:3]:
# 	print(stat)
#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------


#================================================================
# 
#----------------------------------------------------------------

#----------------------------------------------------------------